var U=Object.defineProperty,A=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var $=(a,e,l)=>e in a?U(a,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[e]=l,h=(a,e)=>{for(var l in e||(e={}))C.call(e,l)&&$(a,l,e[l]);if(V)for(var l of V(e))N.call(e,l)&&$(a,l,e[l]);return a},D=(a,e)=>A(a,B(e));import{o as d,c as u,a as t,t as c,m as R,F as S,k as x,u as F,l as z,n as T,_,j as p,y as L,g as f,h as q,p as j,s as H,q as M,v as P,x as G,z as J,A as w,d as K,f as i,B as r,C as k,D as I,E as g}from"./index.dacd8a04.js";const O={class:"container"},Q={class:"mb-3"},W={class:"form-label"},X=["placeholder","value"],m={__name:"BaseInput",props:{label:{type:String,default:""},modelValue:{type:[String,Number],default:""}},setup(a){return(e,l)=>(d(),u("div",O,[t("div",Q,[t("label",W,c(a.label),1),t("input",{type:"text",class:"form-control",placeholder:a.label,value:a.modelValue,onInput:l[0]||(l[0]=n=>e.$emit("update:modelValue",n.target.value))},null,40,X)])]))}},Y={class:"container"},Z={class:"mb-3"},ee={class:"form-label"},ae=["placeholder","value"],te={__name:"BaseInputDate",props:{label:{type:String,default:""},modelValue:{type:[Date,String,Number],default:""}},setup(a){return(e,l)=>(d(),u("div",Y,[t("div",Z,[t("label",ee,c(a.label),1),t("input",{type:"date",class:"form-control",placeholder:a.label,value:a.modelValue,onInput:l[0]||(l[0]=n=>e.$emit("update:modelValue",n.target.value))},null,40,ae)])]))}},le={class:"container"},oe={class:"mb-3"},se={class:"form-label"},re=["placeholder","value"],ne={__name:"BaseTextArea",props:{label:{type:String,default:""},modelValue:{type:[String,Number],default:""}},setup(a){return(e,l)=>(d(),u("div",le,[t("div",oe,[t("label",se,c(a.label),1),t("textarea",{type:"text",class:"form-control",placeholder:a.label,value:a.modelValue,onInput:l[0]||(l[0]=n=>e.$emit("update:modelValue",n.target.value)),rows:"3"},null,40,re)])]))}},ie={class:"container"},de={class:"mb-3"},ue={class:"form-label"},ce=["value"],me=["value","selected"],be={__name:"BaseSeleccion",props:{opciones:{type:Array,required:!0},label:{type:String,default:""},modelValue:{type:[String,Number],default:""}},setup(a){return(e,l)=>(d(),u("div",ie,[t("div",de,[t("label",ue,c(a.label),1),t("select",R({class:"form-select",value:a.modelValue},D(h({},e.$attrs),{onChange:n=>{e.$emit("update:modelValue",n.target.value)}})),[(d(!0),u(S,null,x(a.opciones,n=>(d(),u("option",{value:n,key:n,selected:n===a.modelValue},c(n),9,me))),128))],16,ce)])]))}};F();const pe=z({id:"principal",state:()=>({file:null,datoImagen:null,error:null,editar:!1,loading:!1,urlDescarga:"",ages:["A partir de 2 anos","A partir de 3 anos","A partir de 4 anos","A partir de 13 anos","A partir de 18 anos"],obras:[],obra:{id:"",title:"",company:"",director:"",cast:"",synopsis:"",date:"",link:"",age:"",price:"",photo:""}}),actions:{async obtenerDatos(){try{const a=await T(_(p,"obras"));this.obras=a.docs.map(e=>h({id:e.id},e.data()))}catch(a){console.error("Error al obtener datos:",a)}},async eliminarDato(a){try{await L(f(p,"obras",a)),this.obtenerDatos()}catch(e){console.error("Error al eliminar dato:",e)}},async obtenerDatoID(a){try{const e=await q(f(p,"obras",a));e.exists()?this.obra=h({id:e.id},e.data()):console.warn("\xA1No existe el documento!")}catch(e){console.error("Error al obtener dato por ID:",e)}},buscarImagen(a){const e=a.target.files[0];if(e&&["image/jpeg","image/png"].includes(e.type)){this.file=e,this.error=null;const l=new FileReader;l.readAsDataURL(e),l.onload=n=>{this.datoImagen=n.target.result}}else this.error="Archivo no v\xE1lido",this.file=null},async subirImagen(){if(!this.file)throw new Error("No hay archivo para subir");const a=j(H,`imagenes/${this.file.name}`),e=M(a,this.file);return new Promise((l,n)=>{e.on("state_changed",null,b=>n(b),async()=>{const b=await P(e.snapshot.ref);l(b)})})},async agregarDato(){try{this.loading=!0;const a=await this.subirImagen();await G(_(p,"obras"),{title:this.obra.title,company:this.obra.company,director:this.obra.director,cast:this.obra.cast,synopsis:this.obra.synopsis,age:this.obra.age,link:this.obra.link,price:this.obra.price,date:this.obra.date,photo:a}),this.error="Datos guardados con \xE9xito",this.file=null,this.obtenerDatos()}catch(a){console.error("Error al agregar datos:",a)}finally{this.loading=!1}},async actualizarDato(){try{this.loading=!0;const a=this.file?await this.subirImagen():this.obra.photo,e=f(p,"obras",this.obra.id);await J(e,{title:this.obra.title,company:this.obra.company,director:this.obra.director,cast:this.obra.cast,synopsis:this.obra.synopsis,age:this.obra.age,link:this.obra.link,price:this.obra.price,date:this.obra.date,photo:a}),this.error="Datos actualizados con \xE9xito",this.file=null,this.obtenerDatos()}catch(a){console.error("Error al actualizar datos:",a)}finally{this.loading=!1}}}}),he={class:"container"},ge={class:"mb-3"},ye={class:"form-label"},fe=["placeholder","value"],ve={__name:"BaseInputTime",props:{label:{type:String,default:""},modelValue:{type:[Date,String,Number],default:""}},setup(a){return(e,l)=>(d(),u("div",he,[t("div",ge,[t("label",ye,c(a.label),1),t("input",{type:"time",class:"form-control",placeholder:a.label,value:a.modelValue,onInput:l[0]||(l[0]=n=>e.$emit("update:modelValue",n.target.value))},null,40,fe)])]))}},Ve={class:"container my-4"},$e={class:"input-group my-3"},De={class:"mt-3"},_e={class:"mt-4"},we=["src"],ke={class:"table"},Ie={scope:"row"},Se=["onClick"],xe=["onClick"],Ae={__name:"Formulario",setup(a){const e=pe(),l=w(""),n=w("");K(()=>{e.obtenerDatos()});const b=()=>{if(l.value&&n.value){const y=new Date(`${l.value}T${n.value}:00`);e.obra.date=y}};return(y,o)=>(d(),u("div",null,[t("div",Ve,[t("form",null,[i(m,{modelValue:r(e).obra.company,"onUpdate:modelValue":o[0]||(o[0]=s=>r(e).obra.company=s),type:"text",label:"Compa\xF1ia"},null,8,["modelValue"]),i(m,{modelValue:r(e).obra.title,"onUpdate:modelValue":o[1]||(o[1]=s=>r(e).obra.title=s),type:"text",label:"T\xEDtulo"},null,8,["modelValue"]),i(m,{modelValue:r(e).obra.director,"onUpdate:modelValue":o[2]||(o[2]=s=>r(e).obra.director=s),type:"text",label:"Director"},null,8,["modelValue"]),i(m,{modelValue:r(e).obra.cast,"onUpdate:modelValue":o[3]||(o[3]=s=>r(e).obra.cast=s),type:"text",label:"Elenco"},null,8,["modelValue"]),i(ne,{modelValue:r(e).obra.synopsis,"onUpdate:modelValue":o[4]||(o[4]=s=>r(e).obra.synopsis=s),type:"text",label:"Descripci\xF3n"},null,8,["modelValue"]),i(m,{modelValue:r(e).obra.link,"onUpdate:modelValue":o[5]||(o[5]=s=>r(e).obra.link=s),type:"text",label:"Enlace"},null,8,["modelValue"]),i(be,{modelValue:r(e).obra.age,"onUpdate:modelValue":o[6]||(o[6]=s=>r(e).obra.age=s),opciones:r(e).ages,label:"Selecciona una categor\xEDa"},null,8,["modelValue","opciones"]),i(m,{modelValue:r(e).obra.time,"onUpdate:modelValue":o[7]||(o[7]=s=>r(e).obra.time=s),type:"text",default:"60 minutos",label:"Duraci\xF3n"},null,8,["modelValue"]),i(te,{modelValue:l.value,"onUpdate:modelValue":o[8]||(o[8]=s=>l.value=s),type:"date",label:"Fecha"},null,8,["modelValue"]),i(ve,{modelValue:n.value,"onUpdate:modelValue":o[9]||(o[9]=s=>n.value=s),type:"time",label:"Hora"},null,8,["modelValue"]),i(m,{modelValue:r(e).obra.photo,"onUpdate:modelValue":o[10]||(o[10]=s=>r(e).obra.photo=s),type:"text",label:"Imagen"},null,8,["modelValue"]),t("div",$e,[t("input",{type:"file",onChange:o[11]||(o[11]=s=>r(e).buscarImagen(s))},null,32)]),t("div",De,[k(t("button",{onClick:o[12]||(o[12]=g(s=>{b(),r(e).actualizarDato(y.id)},["prevent"])),class:"btn btn-primary"}," Actualizar ",512),[[I,r(e).editar===!0]]),k(t("button",{onClick:o[13]||(o[13]=g(s=>{b(),r(e).agregarDato()},["prevent"])),class:"btn btn-primary"}," Guardar ",512),[[I,r(e).editar===!1]]),t("div",_e,[t("img",{src:r(e).datoImagen},null,8,we)])])])]),t("table",ke,[o[14]||(o[14]=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"id"),t("th",{scope:"col"},"Author"),t("th",{scope:"col"},"Fecha"),t("th",{scope:"col"},"Editar"),t("th",{scope:"col"},"Eliminar")])],-1)),t("tbody",null,[(d(!0),u(S,null,x(r(e).obras,(s,v)=>(d(),u("tr",{key:v},[t("th",Ie,c(v),1),t("td",null,c(s.company),1),t("td",null,c(s.date),1),t("td",null,[t("button",{onClick:g(E=>{r(e).obtenerDatoID(s.id),r(e).editar=!r(e).editar},["prevent"]),class:"btn btn-primary"},"Editar ",8,Se)]),t("td",null,[t("button",{onClick:g(E=>r(e).eliminarDato(s.id),["prevent"]),class:"btn btn-danger"},"Eliminar ",8,xe)])]))),128))])])]))}};export{Ae as default};
